<%- include("partials/Header") -%>
<%- include("partials/NavbarS") -%>

<div class="all_home_main">
    <%- include("partials/SidebarStudent") -%>
    <div class="all_home_content">
        <div class="student_schedule_main">
            <h2 style="padding: 20px;margin: 0;"><%= date %> - <%= day %></h2>
            <table class="table table-hover table_ss">
                <thead class="thead-light">
                    <tr>
                        <th>Period Time</th>
                        <th>Subject Name</th>
                        <th>Mark Attendance</th>
                    </tr>
                </thead>
                <tbody>
                    <%
                        for(let i=0;i<PeriodTime.length;i++){%>
                            <form action="/StudentSchedule?rollno=<%= rollno %>&periodtime=<%= PeriodTime[i] %>&classname=<%= classes[i] %>&branch=<%= branch %>" method="POST">
                                <tr class="table_rows">
                                    <th><%= PeriodTime[i] %></th>
                                    <td class="class_name"><%= classes[i] %></td>
                                    <td><button class="btn btn-success" type="submit" disabled>
                                        <%
                                            attend.forEach(function(att){
                                                let d = att.date;
                                                let date1 = d.getDate();
                                                let month1 = d.getMonth()+1;
                                                let year1 = d.getFullYear();
                                                let fullDate1 = date1+"/"+month1+"/"+year1;
                                                if(PeriodTime[i]==att.periodtime && classes[i]==att.subjectname && fullDate1==date){%>
                                                    Marked
                                                <%}
                                            });
                                        %>
                                    </button></td>
                                </tr>
                            </form>
                        <%}
                    %>
                </tbody>
            </table>
        </div>
    </div>
</div>

</body>
<script>
    let sideLinks = document.querySelectorAll(".all_sidebar_links");
    sideLinks[0].classList.add("active_sidebar");
</script>
<script src="scripts/StudentSchedule.js" type="text/javascript"></script>
</html>